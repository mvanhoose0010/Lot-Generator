<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lot Number Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #FFD700;
      display: flex;
    }

    .main-content {
      flex: 2;
    }

    input, button {
      padding: 10px;
      margin: 5px 0;
      font-size: 1em;
    }

    .lot-list span {
      display: block;
      padding: 5px;
      margin: 2px 0;
      background: #DDA0DD;
      border: 1px solid #ccc;
      cursor: pointer;
      width: fit-content;
    }

    .lot-list span:hover {
      background: #dff0d8;
    }

    .copied-dialog {
      flex: 1;
      margin-left: 40px;
      padding: 15px;
      background: #DDA0DD;
      border: 1px solid #ccc;
      height: fit-content;
      max-height: 400px;
      overflow-y: auto;
    }

    .copied-dialog h3 {
      margin-top: 0;
    }

    .copied-dialog ul {
      list-style-type: none;
      padding-left: 0;
    }

    .copied-dialog li {
      margin-bottom: 5px;
      white-space: pre; /* Keep tab spacing visible */
    }

    .copied-dialog button {
      margin-top: 10px;
      padding: 8px 12px;
      font-size: 0.95em;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .copied-dialog button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

  <div class="main-content">
    <h2>Solution Lot Builder</h2>

    <label for="lotLetters">Lot Letters/Suffix (e.g., MAE):</label><br>
    <input type="text" id="lotLetters" placeholder="e.g., MAE" maxlength="5"><br>

    <label for="lotNumbers">Lot Number (e.g., 0809251):</label><br>
    <input type="text" id="lotNumbers" placeholder="e.g., 0809251" maxlength="10"><br>

    <label for="count">How many to generate:</label><br>
    <input type="number" id="count" value="10" min="1"><br>

    <button onclick="generateLots()">Generate</button>

    <div class="lot-list" id="results"></div>
  </div>

  <div class="copied-dialog" id="copiedBox">
    <h3>Created Lots</h3>
    <ul id="copiedList"></ul>
    <button onclick="copyAllCreatedLots()">Copy All Created Lots</button>
  </div>

  <script>
  const copiedSet = new Set();

  function generateLots() {
    const letters = document.getElementById('lotLetters').value.trim().toUpperCase();
    const numbers = document.getElementById('lotNumbers').value.trim();
    const count = parseInt(document.getElementById('count').value);
    const resultArea = document.getElementById('results');
    resultArea.innerHTML = '';

    if (!letters.match(/^[A-Z]+$/) || letters.length < 3) {
      alert('Lot letters must be at least 3 characters A-Z only.');
      return;
    }
    if (!numbers.match(/^\d+\d$/)) {
      alert('Lot number must be numeric.');
      return;
    }

    // Break apart
    const firstTwoLetters = letters.slice(0, 2);
    const suffixLetter = letters.slice(2); // everything after 2nd letter
    const datePart = numbers.slice(0, -1); // everything except last digit
    let serialNum = parseInt(numbers.slice(-1), 10); // last digit only

    for (let i = 0; i < count; i++) {
      const newSerial = serialNum + i;
      const newLot = `${firstTwoLetters}${datePart}${newSerial}${suffixLetter}`;
      const displayText = `LOT #: ${newLot}`;

      const span = document.createElement('span');
      span.textContent = displayText;
      span.onclick = () => {
        navigator.clipboard.writeText(displayText);
        span.style.background = "#1E90FF";
        addToCopiedList(newLot);
      };
      resultArea.appendChild(span);
    }
  }

  function addToCopiedList(lot) {
    if (copiedSet.has(lot)) return;
    copiedSet.add(lot);

    const li = document.createElement('li');
    li.textContent = `${lot}\tSOLP`; // Tab separated
    document.getElementById('copiedList').appendChild(li);
  }

  function copyAllCreatedLots() {
    const items = Array.from(document.querySelectorAll('#copiedList li')).map(li => li.textContent);
    if (items.length === 0) {
      alert("No created lots to copy.");
      return;
    }

    const textToCopy = items.join('\n');
    navigator.clipboard.writeText(textToCopy)
      .then(() => alert("All created lots copied to clipboard."))
      .catch(() => alert("Failed to copy."));
  }
</script>


</body>
</html>
